<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‡ºå‹•ãƒ¢ãƒ‹ã‚¿ãƒ¼</title>
  <link rel="manifest" href="manifestt.json">
  <meta name="theme-color" content="blue">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <style>
    body {
      background-color: #000;
      color: #0f0;
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 10px;
    }

    h1 {
      font-size: 24px;
      text-align: center;
      margin-bottom: 15px;
    }

    .monitor {
      border: 2px solid #0f0;
      padding: 15px;
      background-color: #001000;
      min-height: 120px;
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 20px;
      border-radius: 8px;
    }

    .unit {
      font-size: 18px;
      margin: 6px 0;
    }

    .active {
      color: red;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .buttons button {
      padding: 12px 18px;
      font-size: 16px;
      background-color: #111;
      color: #0f0;
      border: 1px solid #0f0;
      border-radius: 5px;
      cursor: pointer;
      flex: 1 1 calc(45% - 10px);
      min-width: 120px;
    }

    .buttons button:hover {
      background-color: #0f0;
      color: #000;
    }
  </style>
</head>
<body>

  <h1>ğŸš¨ å‡ºå‹•ãƒ¢ãƒ‹ã‚¿ãƒ¼ ğŸš¨</h1>

  <div class="monitor" id="monitor">
    <!-- å‡ºå‹•ä¸­éƒ¨éšŠãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
  </div>

  <div class="buttons">
    <button onclick="activateUnit('åŒ—ç¬¬1')">åŒ—ç¬¬1</button>
    <button onclick="activateUnit('åŒ—ç¬¬2')">åŒ—ç¬¬2</button>
    <button onclick="activateUnit('åŒ—æ•‘åŠ©1')">åŒ—æ•‘åŠ©1</button>
    <button onclick="activateUnit('åŒ—æ•‘åŠ©2')">åŒ—æ•‘åŠ©2</button>
    <button onclick="activateUnit('åŒ—æŒ‡æ®1')">åŒ—æŒ‡æ®1</button>
    <button onclick="activateUnit('åŒ—æ•‘æ€¥1')">åŒ—æ•‘æ€¥1</button>
    <button onclick="activateUnit('åŒ—æ•‘æ€¥2')">åŒ—æ•‘æ€¥2</button>
  </div>

  <script type="module">
    import { haptic } from "https://esm.sh/ios-haptics";

    const monitor = document.getElementById('monitor');

    // onclickå±æ€§ã‹ã‚‰å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã€é–¢æ•°ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—(window)ã«å‰²ã‚Šå½“ã¦ã‚‹
    window.activateUnit = function(name) {
      // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãƒˆãƒªã‚¬ãƒ¼
      try {
          haptic(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è§¦è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
      } catch (e) {
          console.error("Haptic feedback failed:", e);
      }

      const existing = document.getElementById(name);
      if (!existing) {
        const div = document.createElement('div');
        div.className = 'unit active';
        div.id = name;
        div.textContent = `å‡ºå‹•ä¸­ï¼š${name}`;
        monitor.appendChild(div);
      }
    }
  </script>

  <script>
    // Service Workerã®ç™»éŒ²
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sww.js').then(registration => {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }).catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>

</body>
</html>
