<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>2EÁî∞‰∏≠</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
/* „ÉÜ„Ç≠„Çπ„ÉàÈÅ∏Êäû„ÇÑÊã°Â§ßÈè°„ÇíÁÑ°ÂäπÂåñ */
* {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

input, textarea {
  -webkit-user-select: text;
  user-select: text;
}
</style>

<script>
document.addEventListener('selectstart', e => e.preventDefault());
document.addEventListener('gesturestart', e => e.preventDefault());
document.addEventListener('touchstart', e => {
  if (e.touches.length > 1) e.preventDefault();
}, { passive: false });
</script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
            overscroll-behavior-y: none;
        }

        * {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        /* ==================== „Çπ„Éó„É©„ÉÉ„Ç∑„É•ÁîªÈù¢ ==================== */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        #splash-screen.fade-out {
            opacity: 0;
            transform: none;
        }

        @keyframes slideUpFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pingSlow {
            0% {
                transform: scale(1);
                opacity: 0.6;
            }
            50% {
                transform: scale(1.3);
                opacity: 0.3;
            }
            100% {
                transform: scale(1.6);
                opacity: 0;
            }
        }

        .slide-up-fade {
            animation: slideUpFadeIn 1s ease-out forwards;
            opacity: 0;
        }

        .delay-200 {
            animation-delay: 0.2s;
        }

        .delay-600 {
            animation-delay: 0.6s;
        }

        .delay-1200 {
            animation-delay: 1.2s;
        }

        .pulse-ring {
            position: absolute;
            inset: 0;
            border-radius: 9999px;
            border: 2px solid white;
            opacity: 0;
            animation: pingSlow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .pulse-ring:nth-child(2) {
            animation-delay: 1s;
        }

        .pulse-ring:nth-child(3) {
            animation-delay: 2s;
        }

        .main-button {
            transition: all 0.3s ease-out;
        }

        .main-button:hover {
            background-color: white;
            color: black;
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(255, 255, 255, 0.2);
        }

        /* ==================== „É°„Ç§„É≥UI ==================== */
        #main-ui {
            display: none;
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #e8f4f8 0%, #f5f7fa 50%, #fef3f8 100%);
            padding: 20px;
            padding-top: 120px;
            padding-bottom: 140px;
            overflow-x: hidden;
            position: relative;
        }

        #main-ui.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Dynamic Island */
        .dynamic-island {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            border-radius: 50%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            width: 12px;
            height: 12px;
            animation: expandIsland 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            cursor: pointer;
            transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dynamic-island:active {
            transform: translateX(-50%) scale(1.05);
        }

        @keyframes expandIsland {
            0% {
                width: 12px;
                height: 12px;
                border-radius: 50%;
            }
            50% {
                width: 12px;
                height: 12px;
                border-radius: 50%;
            }
            100% {
                width: 420px;
                height: 60px;
                border-radius: 30px;
            }
        }

        @keyframes reExpandIsland {
            0% {
                width: 420px;
                height: 60px;
                border-radius: 30px;
            }
            30% {
                width: 12px;
                height: 12px;
                border-radius: 50%;
            }
            70% {
                width: 12px;
                height: 12px;
                border-radius: 50%;
            }
            100% {
                width: 420px;
                height: 60px;
                border-radius: 30px;
            }
        }

        .dynamic-island.re-expand {
            animation: reExpandIsland 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @media (max-width: 768px) {
            @keyframes expandIsland {
                0% {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                }
                50% {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                }
                100% {
                    width: 90%;
                    max-width: 380px;
                    height: 60px;
                    border-radius: 30px;
                }
            }

            @keyframes reExpandIsland {
                0% {
                    width: 90%;
                    max-width: 380px;
                    height: 60px;
                    border-radius: 30px;
                }
                30% {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                }
                70% {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                }
                100% {
                    width: 90%;
                    max-width: 380px;
                    height: 60px;
                    border-radius: 30px;
                }
            }
        }

        .island-text {
            color: white;
            font-size: 15px;
            font-weight: 600;
            position: absolute;
            white-space: nowrap;
            text-align: center;
            padding: 0 20px;
            opacity: 0;
            transform: translateY(20px);
        }

        @media (max-width: 768px) {
            .island-text {
                font-size: 13px;
                padding: 0 15px;
            }
        }

        .island-text.visible {
            animation: slideUpText 0.6s ease-out forwards;
        }

        .island-text.slide-out {
            animation: slideOutText 0.4s ease-in forwards;
        }

        .island-text.slide-in {
            animation: slideInText 0.6s ease-out forwards;
        }

        @keyframes slideUpText {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideOutText {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        @keyframes slideInText {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .bottom-name {
            position: fixed;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 25px;
            z-index: 15;
            padding: 12px 32px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            opacity: 0;
            animation: slideDownName 1s cubic-bezier(0.4, 0, 0.2, 1) 0.8s forwards;
        }

        @keyframes slideDownName {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(-30px);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        .name-ripple {
            position: absolute;
            inset: 0;
            border-radius: 25px;
            border: 3px solid rgba(255, 255, 255, 0.9);
            opacity: 0;
            animation: dynamicRipple 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .name-ripple:nth-child(2) {
            animation-delay: 0.6s;
        }

        .name-ripple:nth-child(3) {
            animation-delay: 1.2s;
        }

        @keyframes dynamicRipple {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.4);
                opacity: 0.4;
            }
            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        .bottom-name-text {
            color: rgba(0, 0, 0, 0.85);
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
            letter-spacing: 0.3px;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 768px) {
            .bottom-name-text {
                font-size: 14px;
            }
            .bottom-name {
                padding: 10px 24px;
            }
        }

        .circle-container {
            position: relative;
            width: 600px;
            height: 600px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .circle-container {
                width: 90vw;
                height: 90vw;
                max-width: 400px;
                max-height: 400px;
            }
        }

        .center-glass {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 2px 8px rgba(255, 255, 255, 0.5);
            animation: glassFloat 4s ease-in-out infinite;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes glassFloat {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.05);
            }
        }

        @media (max-width: 768px) {
            .center-glass {
                width: 110px;
                height: 110px;
                padding: 12px;
                gap: 8px;
            }
            .center-glass.shrink {
                width: 95px;
                height: 95px;
            }
        }

        .progress-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-90deg);
            width: 220px;
            height: 220px;
            z-index: 2;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .progress-ring.active {
            opacity: 1;
        }

        .progress-ring.hidden {
            opacity: 0;
            pointer-events: none;
        }

        @media (max-width: 768px) {
            .progress-ring {
                width: 140px;
                height: 140px;
            }
        }

        .progress-ring-circle {
            fill: none;
            stroke: #00aaff;
            stroke-width: 6;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .rotating-dots {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 260px;
            height: 260px;
            transform: translate(-50%, -50%);
            z-index: 3;
            opacity: 0;
            pointer-events: none;
        }

        .rotating-dots.active {
            animation: rotateAppear 0.8s ease-out forwards;
        }

        @keyframes rotateAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @media (max-width: 768px) {
            .rotating-dots {
                width: 160px;
                height: 160px;
            }
        }

        .rotating-dots svg {
            width: 100%;
            height: 100%;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .dot {
            fill: url(#dotGradient);
            opacity: 0.9;
        }

        .completion-bloom {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 180px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            opacity: 0;
        }

        @media (max-width: 768px) {
            .completion-bloom {
                width: 160px;
                height: 160px;
            }
        }

        .completion-bloom.active {
            animation: bloomExpand 2s ease-out forwards;
        }

        @keyframes bloomExpand {
            0% {
                opacity: 0;
                box-shadow: 
                    0 0 0 0 rgba(147, 197, 253, 0),
                    0 0 0 0 rgb(0, 115, 255),
                    0 0 0 0 rgba(219, 234, 254, 0);
            }
            10% {
                opacity: 1;
                box-shadow: 
                    0 0 20px 10px rgba(147, 197, 253, 0.8),
                    0 0 40px 20px rgba(191, 219, 254, 0.6),
                    0 0 60px 30px rgba(219, 234, 254, 0.4);
            }
            100% {
                opacity: 0;
                box-shadow: 
                    0 0 100px 80px rgba(147, 197, 253, 0),
                    0 0 150px 120px rgba(191, 219, 254, 0),
                    0 0 200px 160px rgba(219, 234, 254, 0);
            }
        }

        .light-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 220px;
            height: 220px;
            border-radius: 50%;
            border: 3px solid rgb(234, 244, 255);
            pointer-events: none;
            z-index: 2;
            opacity: 0;
        }

        @media (max-width: 768px) {
            .light-pulse {
                width: 180px;
                height: 180px;
            }
        }

        .light-pulse.active {
            animation: pulseBurst 1.5s ease-out;
        }

        @keyframes pulseBurst {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
                border-color: rgb(0, 115, 255);
                filter: blur(0px);
            }
            15% {
                opacity: 1;
                border-color: rgba(96, 165, 250, 0.9);
                filter: blur(8px);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(2.5);
                border-color: rgba(147, 197, 253, 0);
                filter: blur(30px);
            }
        }

        .bloom-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 190px;
            height: 190px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 2;
            opacity: 0;
        }

        @media (max-width: 768px) {
            .bloom-pulse {
                width: 170px;
                height: 170px;
            }
        }

        .bloom-pulse.active {
            animation: continuousBloom 2s ease-in-out infinite;
        }

        @keyframes continuousBloom {
            0%, 100% {
                opacity: 0;
                box-shadow: 0 0 0 0 rgba(147, 197, 253, 0);
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                opacity: 0.6;
                box-shadow: 
                    0 0 30px 15px rgba(147, 197, 253, 0.5),
                    0 0 50px 25px rgba(191, 219, 254, 0.3);
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        .ring-icon {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 1);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.15),
                0 0 0 0 rgba(255, 255, 255, 0.5);
            cursor: grab;
            z-index: 20;
            transition: all 0.3s ease;
            animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .ring-icon:active {
            cursor: grabbing;
        }

        .ring-icon:hover {
            transform: scale(1.15);
            box-shadow: 
                0 6px 24px rgba(0, 0, 0, 0.2),
                0 0 20px rgba(255, 255, 255, 0.8);
        }

        @media (max-width: 768px) {
            .ring-icon {
                width: 40px;
                height: 40px;
                font-size: 22px;
            }
        }

        .ring-label {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: rgba(0, 0, 0, 0.8);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 4px 12px;
            border-radius: 12px;
            white-space: nowrap;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            z-index: 9;
        }

        @media (max-width: 768px) {
            .ring-label {
                font-size: 12px;
                padding: 3px 10px;
                top: 48px;
            }
        }

        .background-blur {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgb(255, 255, 255);
            backdrop-filter: blur(20px);
            z-index: 8;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }

        .background-blur.active {
            opacity: 1;
            pointer-events: auto;
        }

        .submit-button {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgb(0, 166, 255);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            border-radius: 25px;
            z-index: 15;
            padding: 12px 32px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            cursor: pointer;
        }

        .submit-button.visible {
            opacity: 1;
            pointer-events: auto;
            animation: slideUpFadeIn 0.6s ease-out;
        }

        .submit-button:hover {
            background: rgba(255, 255, 255, 0.75);
            transform: translateX(-50%) translateY(-2px);
        }

        .submit-button-text {
            color: rgba(0, 0, 0, 0.85);
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            white-space: nowrap;
            letter-spacing: 0.3px;
        }

        @media (max-width: 768px) {
            .submit-button {
                bottom: 90px;
            }
            .submit-button-text {
                font-size: 14px;
            }
        }

        .shrink-out {
            animation: shrinkOut 0.6s cubic-bezier(0.4, 0, 1, 1) forwards;
        }

        @keyframes shrinkOut {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.8); }
        }

        .center-text {
            position: absolute;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            line-height: 1.4;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 1;
            transition: opacity 0.5s ease;
            pointer-events: none;
            z-index: 5;
        }

        .center-text.hidden {
            opacity: 0;
        }

        @media (max-width: 768px) {
            .center-text {
                font-size: 15px;
            }
        }

        .center-number {
            position: absolute;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            font-size: 64px;
            font-weight: 600;
            color: rgba(0, 0, 0, 0.75);
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
            z-index: 15;
            text-shadow: 
                0 2px 4px rgba(255, 255, 255, 0.8),
                0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .center-number.visible {
            opacity: 1;
            animation: slideUpFadeIn 0.5s ease-out forwards;
        }

        @media (max-width: 768px) {
            .center-number {
                font-size: 52px;
            }
        }

        .center-arrow {
            position: absolute;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            font-size: 48px;
            font-weight: 300;
            color: rgba(0, 0, 0, 0.7);
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.2s ease;
            pointer-events: none;
            z-index: 9999;
            transform-style: preserve-3d;
            animation: arrow3D 3s ease-in-out infinite;
            text-shadow:
                0 1px 0 rgba(255, 255, 255, 0.8),
                0 2px 0 rgba(0, 0, 0, 0.2),
                0 3px 0 rgba(0, 0, 0, 0.15),
                0 4px 0 rgba(0, 0, 0, 0.1),
                0 5px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }

        .center-arrow:active {
            transform: scale(0.95);
        }

        .confirmation-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e8f4f8 0%, #f5f7fa 50%, #fef3f8 100%);
            z-index: 2000;
            display: none;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            padding: 20px;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .confirmation-screen.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .confirmation-screen.hidden {
            opacity: 0;
            transform: translateY(100%);
        }

        .confirmation-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            padding: 16px 20px;
            text-align: center;
            z-index: 2010;
            color: white;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.5px;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .confirmation-banner {
                font-size: 13px;
                padding: 14px 16px;
            }
        }

        .selected-items-display {
            margin-top: 80px;
            display: flex;
            flex-direction: column;
            gap: 40px;
            justify-content: center;
            align-items: center;
            padding: 30px 20px;
        }

        @media (max-width: 768px) {
            .selected-items-display {
                gap: 35px;
                padding: 25px 15px;
                margin-top: 75px;
            }
        }

        .selected-item-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            animation: slideUpItemIOS 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            opacity: 0;
        }

        @keyframes slideUpItemIOS {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes slideInItem {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .selected-item-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 
                0 8px 24px rgba(0, 0, 0, 0.12),
                inset 0 2px 6px rgba(255, 255, 255, 0.5);
        }

        @media (max-width: 768px) {
            .selected-item-circle {
                width: 65px;
                height: 65px;
                font-size: 32px;
            }
        }

        .selected-item-title {
            color: rgba(0, 0, 0, 0.75);
            font-size: 14px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .selected-item-title {
                font-size: 12px;
            }
        }

        .confirmation-center-arrow {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            color: rgba(0, 0, 0, 0.7);
            cursor: pointer;
            margin: 40px 0;
            transition: all 0.3s ease;
            box-shadow:
                0 12px 40px rgba(0, 0, 0, 0.15),
                inset 0 2px 8px rgba(255, 255, 255, 0.6);
            animation: floatUpAndScale 2s ease-in-out infinite;
        }

        .confirmation-center-arrow-inline {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
            color: rgba(0, 0, 0, 0.7);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow:
                0 12px 40px rgba(0, 0, 0, 0.15),
                inset 0 2px 8px rgba(255, 255, 255, 0.6);
            animation: floatUpAndScaleInline 2s ease-in-out infinite, slideUpButtons 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            animation-delay: 0s, 0.15s;
            opacity: 0;
        }

        .confirmation-center-arrow-inline:active {
            transform: scale(0.95);
        }

        @keyframes floatUpAndScaleInline {
            0%, 100% {
                transform: translateY(0) scale(1);
            }
            50% {
                transform: translateY(-10px) scale(1.08);
            }
        }
        
        @keyframes floatUpAndScale {
            0%, 100% {
                transform: translateY(0) scale(1);
            }
            50% {
                transform: translateY(-10px) scale(1.08);
            }
        }

        .confirmation-center-arrow:active {
            transform: scale(0.95);
        }

        @keyframes floatUp {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @media (max-width: 768px) {
            .confirmation-center-arrow,
            .confirmation-center-arrow-inline {
                width: 110px;
                height: 110px;
                font-size: 50px;
                margin: 35px 0;
            }
        }

        .confirmation-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 300px;
            margin-top: 30px;
            margin-bottom: 30px;
            animation: slideUpButtons 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            animation-delay: 0.2s;
            opacity: 0;
        }
        
        @keyframes slideUpButtons {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .confirmation-buttons {
                max-width: 280px;
                gap: 10px;
                margin-top: 25px;
                margin-bottom: 25px;
            }
        }

        .btn-redo, .btn-suggest-text {
            padding: 14px 32px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
        }

        @media (max-width: 768px) {
            .btn-redo, .btn-suggest-text {
                padding: 12px 28px;
                font-size: 14px;
            }
        }

        .btn-redo {
            background: rgba(255, 255, 255, 0.6);
            color: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-redo:active {
            transform: scale(0.98);
        }

        .btn-suggest-text {
            background: linear-gradient(185deg, #006aff 0%, #00a2ff 100%);
            color: white;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .btn-suggest-text:active {
            transform: scale(0.98);
        }

        .confirmation-footer {
            text-align: center;
            padding: 20px;
            font-size: 13px;
            color: rgba(0, 0, 0, 0.6);
        }

        .confirmation-name {
            font-weight: 600;
            color: rgba(0, 0, 0, 0.8);
            font-size: 14px;
            margin-top: 10px;
        }

        .blur-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(8px);
            z-index: 1999;
            opacity: 0;
            transition: opacity 0.3s ease-out;
            pointer-events: none;
        }

        .blur-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .center-arrow.visible {
            opacity: 1;
            pointer-events: auto;
        }

        @keyframes arrow3D {
            0%, 100% {
                transform: perspective(1000px) rotateX(0deg) translateZ(0px);
                text-shadow: 
                    0 1px 0 rgba(255, 255, 255, 0.8),
                    0 2px 0 rgba(0, 0, 0, 0.2),
                    0 3px 0 rgba(0, 0, 0, 0.15),
                    0 4px 0 rgba(0, 0, 0, 0.1),
                    0 5px 10px rgba(0, 0, 0, 0.2);
            }
            50% {
                transform: perspective(1000px) rotateX(5deg) translateZ(20px);
                text-shadow: 
                    0 2px 0 rgba(255, 255, 255, 0.9),
                    0 4px 0 rgba(0, 0, 0, 0.25),
                    0 6px 0 rgba(0, 0, 0, 0.2),
                    0 8px 0 rgba(0, 0, 0, 0.15),
                    0 10px 20px rgba(0, 0, 0, 0.3);
            }
        }

        @media (max-width: 768px) {
            .center-arrow {
                font-size: 38px;
            }
        }

        .center-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            cursor: grab;
            transition: transform 0.2s ease;
            animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .center-icon:active {
            cursor: grabbing;
        }

        .center-icon:hover {
            transform: scale(1.1);
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @media (max-width: 768px) {
            .center-icon {
                width: 32px;
                height: 32px;
                font-size: 18px;
            }
        }

        @keyframes spinToCenter {
            0% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(0.7) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(0.3) rotate(360deg);
                opacity: 0;
            }
        }

        .icon-card {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: grab;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            user-select: none;
            touch-action: none;
            z-index: 5;
        }

        .icon-card.selected {
            opacity: 0.4;
            pointer-events: none;
        }

        .icon-card.dragging {
            z-index: 1000;
            cursor: grabbing;
        }

        .icon-card.near-center {
            transform: translate(-50%, -50%) scale(1.2) !important;
        }

        .icon-card.animating {
            pointer-events: none;
        }

        .icon-card:hover:not(.selected):not(.animating) {
            z-index: 10;
        }

        .icon-card .icon-circle {
            animation: iconScaleUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
        }

        .icon-card .icon-title {
            animation: titleSlideUp 0.6s ease-out backwards;
        }

        @keyframes iconScaleUp {
            from {
                opacity: 0;
                transform: scale(0);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes titleSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .icon-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.7);
            box-shadow: 
                0 8px 24px rgba(0, 0, 0, 0.12),
                inset 0 2px 6px rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .icon-circle {
                width: 55px;
                height: 55px;
                font-size: 28px;
            }
        }

        .icon-circle::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .icon-card:hover .icon-circle::before {
            opacity: 1;
        }

        .icon-card:hover .icon-circle {
            transform: scale(1.15);
            box-shadow: 
                0 12px 32px rgba(0, 0, 0, 0.2),
                0 0 20px currentColor,
                inset 0 2px 8px rgba(255, 255, 255, 0.6);
        }

        .gradient-1 { color: #60a5fa; }
        .gradient-2 { color: #7dd3fc; }
        .gradient-3 { color: #a78bfa; }
        .gradient-4 { color: #c084fc; }
        .gradient-5 { color: #e879f9; }
        .gradient-6 { color: #f472b6; }
        .gradient-7 { color: #fb7185; }
        .gradient-8 { color: #fca5a5; }
        .gradient-9 { color: #fdba74; }
        .gradient-10 { color: #fcd34d; }
        .gradient-11 { color: #a3e635; }
        .gradient-12 { color: #86efac; }

        .icon-title {
            color: rgba(0, 0, 0, 0.75);
            font-size: 13px;
            font-weight: 500;
            text-align: center;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            max-width: 80px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        @media (max-width: 768px) {
            .icon-title {
                font-size: 11px;
                max-width: 65px;
            }
        }

/* ==================== ÈÄÅ‰ø°‰∏≠ÁîªÈù¢ ==================== */
.submitting-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #fff;
    z-index: 3000;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.submitting-screen.active {
    display: flex;
    opacity: 1;
}

.submitting-gif {
    width: 1200px;
    aspect-ratio: 4 / 3; /* ‚Üê 4:3„ÇíÁ∂≠ÊåÅ */
    height: auto; /* ÊØîÁéáÂõ∫ÂÆö„ÅÆ„Åü„ÇÅËá™ÂãïË®àÁÆó */
    max-width: 100%; /* Â∞è„Åï„ÅÑÁîªÈù¢„Åß„ÅØÂèé„Åæ„Çã„Çà„ÅÜ„Å´ */
    max-height: 100%;
    object-fit: contain; /* ÁîªÂÉè„ÅÆÁ∏¶Ê®™ÊØî„ÇíÁ∂≠ÊåÅ„Åó„Å¶Âèé„ÇÅ„Çã */
    overflow: visible;
    opacity: 0;
    animation: fadeInGif 0.6s ease-out forwards;
}

/* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
@keyframes fadeInGif {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* „Çπ„Éû„Éõ„Åß„ÇÇ4:3„ÇíÁ∂≠ÊåÅ„Åó„Å§„Å§Á∏ÆÂ∞è */
@media (max-width: 768px) {
    .submitting-gif {
        width: 99vw;
        aspect-ratio: 4 / 3;
        height: auto;
    }
}

        .submitting-text {
            position: absolute;
            bottom: 30%;
            color: rgba(0, 0, 0, 0.75);
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 0.5px;
            animation: fadeInText 0.6s ease-out 0.3s forwards;
            opacity: 0;
        }

        @keyframes fadeInText {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .submitting-text {
                font-size: 18px;
                bottom: 25%;
            }
        }
    </style>
</head>
<body>
    
    <!-- „Çπ„Éó„É©„ÉÉ„Ç∑„É•ÁîªÈù¢ -->
    <div id="splash-screen">
        <div class="w-full max-w-4xl flex flex-col items-center justify-center" style="height: 100vh;">
            
            <div class="flex items-center justify-center" style="height: 20vh;">
                <h2 class="text-white text-xl md:text-2xl font-light tracking-wider slide-up-fade delay-200 text-center">
                    Â≠¶Ê†°ÁîüÊ¥ª„ÇíÂ§©ÂõΩ„Å´„ÄÇ
                </h2>
            </div>

            <div class="flex items-center justify-center" style="height: 60vh;">
                <div class="text-center slide-up-fade delay-600">
                    <h1 class="text-7xl md:text-8xl lg:text-9xl font-bold text-white leading-tight">
                        2EÁî∞‰∏≠
                    </h1>
                    <h1 class="text-9xl md:text-8xl lg:text-9xl font-bold text-white leading-tight opacity-70">
                        ÂØøÂº•
                    </h1>
                </div>
            </div>

            <div class="flex items-center justify-center" style="height: 20vh;">
                <div class="relative slide-up-fade delay-1200">
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                    </div>
                    
                    <button class="main-button relative px-12 py-5 bg-transparent border-2 border-white rounded-full text-white text-lg md:text-xl font-medium tracking-widest shadow-lg">
                        2E Áî∞‰∏≠ÂØøÂº• 2E
                    </button>
                </div>
            </div>

        </div>
    </div>

    <form id="suggestion-form" name="suggestion" method="POST" action="thanks.html" data-netlify="true">
        <input type="hidden" name="form-name" value="suggestion" />
        <input type="hidden" id="selection1" name="selection1" />
        <input type="hidden" id="selection2" name="selection2" />

        <!-- „É°„Ç§„É≥UI -->
        <div id="main-ui">
            <div class="background-blur" id="backgroundBlur"></div>

            <div class="dynamic-island" id="dynamicIsland">
                <div class="island-text" id="islandText1">‰ªä„ÄÅÂ≠¶Ê†°„ÅßÊÇ©„Çì„Åß„Çã„Ç´„ÉÜ„Ç¥„É™„ÇíÔºíÂÄãÈÅ∏„Åº„ÅÜ</div>
                <div class="island-text" id="islandText2">„ÅÇ„Å®1ÂÄãÔºÅ„Åà„Çâ„Çì„Åß„Åø„Å¶üëÄ</div>
                <div class="island-text" id="islandText3">„ÅÑ„ÅÑ„Å≠ÔºÅ„Çø„ÉÉ„Éó„Åó„Å¶Áî∞‰∏≠„Å´ÊèêÊ°à„Åó„Çà„ÅÜ</div>
            </div>

            <div class="bottom-name" id="bottomName">
                <div class="name-ripple"></div>
                <div class="name-ripple"></div>
                <div class="name-ripple"></div>
                <div class="bottom-name-text" id="bottomNameText">2-E Áî∞‰∏≠ÂØøÂº•</div>
            </div>

            <div class="circle-container">
                <svg class="progress-ring" id="progressRing">
                    <circle
                        class="progress-ring-circle"
                        id="progressCircle"
                        cx="110"
                        cy="110"
                        r="107"
                        stroke-dasharray="672"
                        stroke-dashoffset="672"
                    />
                </svg>

                <div class="rotating-dots" id="rotatingDots">
                    <svg viewBox="0 0 100 100">
                        <defs>
                            <linearGradient id="dotGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#FF8E53;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FFA07A;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle class="dot" cx="50" cy="8" r="1.5"/>
                        <circle class="dot" cx="68" cy="12" r="1.5"/>
                        <circle class="dot" cx="82" cy="25" r="1.5"/>
                        <circle class="dot" cx="88" cy="42" r="1.5"/>
                        <circle class="dot" cx="88" cy="58" r="1.5"/>
                        <circle class="dot" cx="82" cy="75" r="1.5"/>
                        <circle class="dot" cx="68" cy="88" r="1.5"/>
                        <circle class="dot" cx="50" cy="92" r="1.5"/>
                        <circle class="dot" cx="32" cy="88" r="1.5"/>
                        <circle class="dot" cx="18" cy="75" r="1.5"/>
                        <circle class="dot" cx="12" cy="58" r="1.5"/>
                        <circle class="dot" cx="12" cy="42" r="1.5"/>
                        <circle class="dot" cx="18" cy="25" r="1.5"/>
                        <circle class="dot" cx="32" cy="12" r="1.5"/>
                    </svg>
                </div>

                <div class="light-pulse" id="lightPulse1"></div>
                <div class="light-pulse" id="lightPulse2"></div>
                <div class="light-pulse" id="lightPulse3"></div>
                <div class="completion-bloom" id="completionBloom"></div>
                <div class="bloom-pulse" id="bloomPulse"></div>

                <div class="center-glass" id="centerGlass">
                    <div class="center-text" id="centerText">„Åì„Åì„Å´Ê°à„Çí<br>ÂÖ•„Çå„Çà„ÅÜ„ÄÇ</div>
                    <div class="center-number" id="centerNumber">1</div>
                    <div class="center-arrow" id="centerArrow">‚Üë</div>
                </div>

                <!-- ÂÜÖÂÅ¥„ÅÆ5ÂÄã„ÅÆ„Ç¢„Ç§„Ç≥„É≥ -->
                <div class="icon-card inner-icon" data-index="0" data-emoji="‚åöÔ∏è" data-title="ÊôÇÈñì" data-color="#60a5fa">
                    <div class="icon-circle gradient-1" style="animation-delay: 0.1s;">‚åöÔ∏è</div>
                    <div class="icon-title" style="animation-delay: 0.15s;">ÊôÇÈñì</div>
                </div>
                <div class="icon-card inner-icon" data-index="1" data-emoji="ü•§" data-title="Ëá™Ë≤©Ê©ü" data-color="#7dd3fc">
                    <div class="icon-circle gradient-2" style="animation-delay: 0.2s;">ü•§</div>
                    <div class="icon-title" style="animation-delay: 0.25s;">Ëá™Ë≤©Ê©ü</div>
                </div>
                <div class="icon-card inner-icon" data-index="2" data-emoji="‚öΩÔ∏è" data-title="ÈÅãÂãï" data-color="#a78bfa">
                    <div class="icon-circle gradient-3" style="animation-delay: 0.3s;">‚öΩÔ∏è</div>
                    <div class="icon-title" style="animation-delay: 0.35s;">ÈÅãÂãï</div>
                </div>
                <div class="icon-card inner-icon" data-index="3" data-emoji="üç±" data-title="Ë≥ºË≤∑" data-color="#c084fc">
                    <div class="icon-circle gradient-4" style="animation-delay: 0.4s;">üç±</div>
                    <div class="icon-title" style="animation-delay: 0.45s;">Ë≥ºË≤∑</div>
                </div>
                <div class="icon-card inner-icon" data-index="4" data-emoji="üìö" data-title="ÂãâÂº∑" data-color="#e879f9">
                    <div class="icon-circle gradient-5" style="animation-delay: 0.5s;">üìö</div>
                    <div class="icon-title" style="animation-delay: 0.55s;">ÂãâÂº∑</div>
                </div>

                <!-- Â§ñÂÅ¥„ÅÆ7ÂÄã„ÅÆ„Ç¢„Ç§„Ç≥„É≥ -->
                <div class="icon-card outer-icon" data-index="0" data-emoji="‚úèÔ∏è" data-title="ÈÅÖÂª∂" data-color="#f472b6">
                    <div class="icon-circle gradient-6" style="animation-delay: 0.6s;">‚úèÔ∏è</div>
                    <div class="icon-title" style="animation-delay: 0.65s;">ÈÅÖÂª∂</div>
                </div>
                <div class="icon-card outer-icon" data-index="1" data-emoji="üìã" data-title="Ê†°Ââá" data-color="#fb7185">
                    <div class="icon-circle gradient-7" style="animation-delay: 0.7s;">üìã</div>
                    <div class="icon-title" style="animation-delay: 0.75s;">Ê†°Ââá</div>
                </div>
                <div class="icon-card outer-icon" data-index="2" data-emoji="‚òï" data-title="„ÅäÊòº‰ºëÊÜ©" data-color="#fca5a5">
                    <div class="icon-circle gradient-8" style="animation-delay: 0.8s;">‚òï</div>
                    <div class="icon-title" style="animation-delay: 0.85s;">„ÅäÊòº‰ºëÊÜ©</div>
                </div>
                <div class="icon-card outer-icon" data-index="3" data-emoji="üí™" data-title="‰ΩìÂäõ‰Ωú„Çä" data-color="#fdba74">
                    <div class="icon-circle gradient-9" style="animation-delay: 0.9s;">üí™</div>
                    <div class="icon-title" style="animation-delay: 0.95s;">‰ΩìÂäõ‰Ωú„Çä</div>
                </div>
                <div class="icon-card outer-icon" data-index="4" data-emoji="üëÄ" data-title="ÊÑèË¶ãÂÖ±Êúâ" data-color="#fcd34d">
                    <div class="icon-circle gradient-10" style="animation-delay: 1.0s;">üëÄ</div>
                    <div class="icon-title" style="animation-delay: 1.05s;">ÊÑèË¶ãÂÖ±Êúâ</div>
                </div>
                <div class="icon-card outer-icon special-card" data-index="5" data-type="suggestion" data-emoji="üí≠" data-title="Êõ∏„ÅÑ„Å¶ÊèêÊ°à" data-color="#a3e635">
                    <div class="icon-circle gradient-11" style="animation-delay: 1.1s;">üí≠</div>
                    <div class="icon-title" style="animation-delay: 1.15s;">Êõ∏„ÅÑ„Å¶ÊèêÊ°à</div>
                </div>
                <div class="icon-card outer-icon special-card" data-index="6" data-type="other" data-emoji="‚ûï" data-title="„Åù„ÅÆ‰ªñ" data-color="#86efac">
                    <div class="icon-circle gradient-12" style="animation-delay: 1.2s;">‚ûï</div>
                    <div class="icon-title" style="animation-delay: 1.25s;">„Åù„ÅÆ‰ªñ</div>
                </div>
            </div>
        </div>
    </form>

    <!-- Á¢∫Ë™çÁîªÈù¢ -->
    <div class="blur-overlay" id="blurOverlay"></div>
    <div class="confirmation-screen" id="confirmationScreen">
        <div class="confirmation-banner">
            „ÅÑ„ÅÑ„Å≠ÔºÅ‚Üë„Çí„Çø„ÉÉ„Éó„Åó„Å¶Áî∞‰∏≠„Å´ÊèêÊ°à„Åó„Çà„ÅÜ
        </div>
        
        <div class="selected-items-display" id="selectedItemsDisplay">
        </div>
        
        <div class="confirmation-buttons">
            <button class="btn-redo" id="haptic">„Åà„Çâ„Å≥Áõ¥„Åô</button>
            <button class="btn-suggest-text" id="suggestTextButton">Êõ∏„ÅÑ„Å¶Áî∞‰∏≠„Å´ÊèêÊ°à</button>
        </div>
        
        <div class="confirmation-footer">
            <div>ÊèêÊ°à„ÅÆÂÜÖÂÆπ„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>
            <div class="confirmation-name">2-E Áî∞‰∏≠ÂØøÂº•</div>
        </div>
    </div>

    <!-- ÈÄÅ‰ø°‰∏≠ÁîªÈù¢ -->
    <div class="submitting-screen" id="submittingScreen">
        <img src="face.gif" alt="ÈÄÅ‰ø°‰∏≠" class="submitting-gif" id="submittingGif">
        <div class="submitting-text">ÈÄÅ‰ø°‰∏≠...</div>
    </div>

    <script type="module">
import { haptic } from "https://esm.sh/ios-haptics";

// ‚úÖ „Éö„Éº„Ç∏ÂÜÖ„Å©„Åì„Çí„Çø„ÉÉ„Éó„Åó„Å¶„ÇÇÁô∫ÁÅ´
document.addEventListener("click", () => {
  try {
    // ÈÄ£Á∂ö„ÅßÈ≥¥„Å£„Å¶„ÇÇÂïèÈ°å„Å™„ÅÑ„Çà„ÅÜ„Å´Â∞ë„ÅóÂà∂Âæ°
    if (!window.__hapticLock) {
      window.__hapticLock = true;
      haptic.confirm(); // ‚Üê switchÊñπÂºè„ÅÆ confirm „Çí‰ΩøÁî®
      setTimeout(() => (window.__hapticLock = false), 150);
    }
  } catch (e) {
    console.warn("Haptic failed:", e);
  }
});

// ‚úÖ Êó¢Â≠ò„ÅÆ„Éú„Çø„É≥„Å™„Å©„ÇÇÁ¢∫ÂÆü„Å´Âãï‰Ωú
const safeBind = (id, fn) => {
  const el = document.getElementById(id);
  if (el) el.addEventListener("click", fn, { passive: true });
};

// ‰æãÔºö„Ç®„É©„ÉºÈÄ£Êâì
safeBind("hapticError", () => {
  const delay = 220;
  const sequence = [0, 1, 2, 4, 5, 6];
  sequence.forEach(i => {
    setTimeout(() => haptic.error(), i * delay);
  });
});

// ‰æãÔºöÂÄãÂà•„Éú„Çø„É≥„Å´„ÇÇÁ¢∫ÂÆü„Å´
safeBind("haptic", haptic.confirm);
safeBind("suggestTextButton", haptic.confirm);
safeBind("centerArrow", haptic.confirm);
        const splash = document.getElementById('splash-screen');
        const mainUI = document.getElementById('main-ui');
        let canTransition = false;
        
        setTimeout(() => {
            canTransition = true;
        }, 1000);
        
        setTimeout(() => transitionToMain(), 1500);
        splash.addEventListener('click', () => {
            if (canTransition) {
                transitionToMain();
            }
        });

        function transitionToMain() {
            splash.classList.add('fade-out');
            setTimeout(() => {
                splash.style.display = 'none';
                mainUI.classList.add('active');
                initializeMainUI();
            }, 600);
        }

        function initializeMainUI() {
            // ÂÖÉ„ÅÆHaptic Feedback ObjectÔºà„Ç∑„É≥„Éó„É´„Å™vibrateÁâàÔºâ
            const haptic = {
                vibrate: (pattern) => {
                    if (window.navigator.vibrate) {
                        try {
                            window.navigator.vibrate(pattern);
                        } catch (e) {
                            console.log("Vibration failed", e);
                        }
                    }
                },
                success: function() { this.vibrate([100, 50, 100]); },
                error: function() { this.vibrate([75, 50, 75, 50, 75]); },
                click: function() { this.vibrate(20); }
            };

            const form = document.getElementById('suggestion-form');
            const container = document.querySelector('.circle-container');
            const containerRect = container.getBoundingClientRect();
            const centerX = containerRect.width / 2;
            const centerY = containerRect.height / 2;
            const centerGlass = document.getElementById('centerGlass');
            const centerText = document.getElementById('centerText');
            const centerNumber = document.getElementById('centerNumber');
            const centerArrow = document.getElementById('centerArrow');
            const progressRing = document.getElementById('progressRing');
            const progressCircle = document.getElementById('progressCircle');
            
            let selectedCards = [];
            const selectedIcons = new Map();
            const maxSelection = 2;
            let currentIslandText = 1;

            if (window.innerWidth <= 768) {
                progressRing.setAttribute('viewBox', '0 0 140 140');
                progressCircle.setAttribute('cx', '70');
                progressCircle.setAttribute('cy', '70');
                progressCircle.setAttribute('r', '67');
                const circumference = 2 * Math.PI * 67;
                progressCircle.setAttribute('stroke-dasharray', circumference);
                progressCircle.setAttribute('stroke-dashoffset', circumference);
            }

            // „Ç¢„Ç§„Ç≥„É≥ÈÖçÁΩÆ
            const innerIcons = document.querySelectorAll('.inner-icon');
            const innerRadius = window.innerWidth <= 768 ? containerRect.width * 0.25 : 150;
            const innerAngleStep = (Math.PI * 2) / 5;
            const innerStartAngle = -Math.PI / 2;

            innerIcons.forEach((icon, index) => {
                const angle = innerStartAngle + (innerAngleStep * index);
                const x = Math.cos(angle) * innerRadius;
                const y = Math.sin(angle) * innerRadius;
                icon.style.left = `${centerX + x}px`;
                icon.style.top = `${centerY + y}px`;
                icon.style.transform = 'translate(-50%, -50%)';
                icon.dataset.originalX = centerX + x;
                icon.dataset.originalY = centerY + y;
            });

            const outerIcons = document.querySelectorAll('.outer-icon');
            const outerRadius = window.innerWidth <= 768 ? containerRect.width * 0.4 : 240;
            const outerAngleStep = (Math.PI * 2) / 7;
            const outerStartAngle = -Math.PI / 2;

            outerIcons.forEach((icon, index) => {
                const angle = outerStartAngle + (outerAngleStep * index);
                const x = Math.cos(angle) * outerRadius;
                const y = Math.sin(angle) * outerRadius;
                icon.style.left = `${centerX + x}px`;
                icon.style.top = `${centerY + y}px`;
                icon.style.transform = 'translate(-50%, -50%)';
                icon.dataset.originalX = centerX + x;
                icon.dataset.originalY = centerY + y;
            });

            setTimeout(() => document.getElementById('islandText1').classList.add('visible'), 1500);

            const island = document.getElementById('dynamicIsland');
            island.addEventListener('click', function() {
                haptic.click();
                if (selectedCards.length === 2) {
                    showConfirmationScreen();
                }
            });

            function updateIslandText(textNumber) {
                const texts = [
                    document.getElementById('islandText1'),
                    document.getElementById('islandText2'),
                    document.getElementById('islandText3')
                ];
                
                texts.forEach((text, index) => {
                    if (index + 1 === currentIslandText) {
                        text.classList.add('slide-out');
                        text.classList.remove('visible', 'slide-in');
                    }
                });
                
                setTimeout(() => {
                    texts[textNumber - 1].classList.add('slide-in');
                    texts[textNumber - 1].classList.remove('slide-out');
                    currentIslandText = textNumber;
                }, 400);
            }

            function updateProgressRing(percentage) {
                const radius = window.innerWidth <= 768 ? 67 : 107;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (percentage / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
            }

            function addIconToRing(card) {
                const emoji = card.dataset.emoji;
                const color = card.dataset.color;
                const title = card.dataset.title;
                
                setTimeout(() => {
                    const ringIcon = document.createElement('div');
                    ringIcon.className = 'ring-icon';
                    ringIcon.textContent = emoji;
                    ringIcon.style.color = color;
                    ringIcon.dataset.cardId = card.dataset.index + (card.classList.contains('inner-icon') ? 'inner' : 'outer');
                    
                    const ringLabel = document.createElement('div');
                    ringLabel.className = 'ring-label';
                    ringLabel.textContent = title;
                    ringIcon.appendChild(ringLabel);
                    
                    const containerRect = container.getBoundingClientRect();
                    const glassRect = centerGlass.getBoundingClientRect();
                    const centerX = glassRect.left + glassRect.width / 2 - containerRect.left;
                    const centerY = glassRect.top + glassRect.height / 2 - containerRect.top;
                    
                    const ringRadius = window.innerWidth <= 768 ? 90 : 110;
                    
                    let angle;
                    if (selectedCards.length === 1) {
                        angle = -Math.PI / 2;
                    } else if (selectedCards.length === 2) {
                        angle = Math.PI / 2;
                    }
                    
                    const x = centerX + Math.cos(angle) * ringRadius;
                    const y = centerY + Math.sin(angle) * ringRadius;
                    
                    ringIcon.style.left = x + 'px';
                    ringIcon.style.top = y + 'px';
                    ringIcon.style.transform = 'translate(-50%, -50%)';
                    
                    container.appendChild(ringIcon);
                    selectedIcons.set(card, ringIcon);
                    
                    setTimeout(() => {
                        if (selectedCards.length === 1) {
                            centerText.classList.add('hidden');
                            centerNumber.classList.add('visible');
                            updateIslandText(2);
                            progressRing.classList.add('active');
                            updateProgressRing(50);
                        } else if (selectedCards.length === 2) {
                            centerNumber.classList.remove('visible');
                            updateProgressRing(100);
                            setTimeout(() => {
                                progressRing.classList.add('hidden');

                                const completionBloom = document.getElementById('completionBloom');
                                const bloomPulse = document.getElementById('bloomPulse');
                                const lightPulse1 = document.getElementById('lightPulse1');
                                const lightPulse2 = document.getElementById('lightPulse2');
                                const lightPulse3 = document.getElementById('lightPulse3');

                                completionBloom.classList.add('active');
                                setTimeout(() => lightPulse1.classList.add('active'), 0);
                                setTimeout(() => lightPulse2.classList.add('active'), 200);
                                setTimeout(() => lightPulse3.classList.add('active'), 400);
                                setTimeout(() => bloomPulse.classList.add('active'), 800);

                                setTimeout(() => {
                                    showConfirmationScreen();
                                }, 1000);
                            }, 800);
                        }
                    }, 100);
                }, 300);
            }

            function submitForm() {
                haptic.success();
                
                if (selectedCards.length === 2) {
                    document.getElementById('selection1').value = selectedCards[0].dataset.title;
                    document.getElementById('selection2').value = selectedCards[1].dataset.title;
                    
                    // ÈÄÅ‰ø°‰∏≠ÁîªÈù¢„ÇíË°®Á§∫
                    const submittingScreen = document.getElementById('submittingScreen');
                    submittingScreen.classList.add('active');
                    
                    // GIFË™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´ÂÆüÈöõ„ÅÆÈÄÅ‰ø°„ÇíË°å„ÅÜ
                    const gifElement = document.getElementById('submittingGif');
                    
                    if (gifElement.complete) {
                        setTimeout(() => {
                            form.submit();
                        }, 2000);
                    } else {
                        gifElement.onload = () => {
                            setTimeout(() => {
                                form.submit();
                            }, 2000);
                        };
                    }
                }
            }

            const confirmationScreen = document.getElementById('confirmationScreen');
            const blurOverlay = document.getElementById('blurOverlay');
            const selectedItemsDisplay = document.getElementById('selectedItemsDisplay');
            const redoButton = document.getElementById('haptic');
            const suggestTextButton = document.getElementById('suggestTextButton');
            
            function showConfirmationScreen() {
                haptic.click();
                selectedItemsDisplay.innerHTML = '';
                
                if (selectedCards.length >= 1) {
                    const firstCard = selectedCards[0];
                    const firstItemDiv = document.createElement('div');
                    firstItemDiv.className = 'selected-item-card';
                    firstItemDiv.style.animationDelay = '0s';
                    firstItemDiv.innerHTML = `
                        <div class="selected-item-circle">${firstCard.dataset.emoji}</div>
                        <div class="selected-item-title">${firstCard.dataset.title}</div>
                    `;
                    selectedItemsDisplay.appendChild(firstItemDiv);
                }
                
                const arrowDiv = document.createElement('div');
                arrowDiv.className = 'confirmation-center-arrow-inline';
                arrowDiv.id = 'confirmationArrow';
                arrowDiv.textContent = '‚Üë';
                arrowDiv.addEventListener('click', submitForm);
                selectedItemsDisplay.appendChild(arrowDiv);
                
                if (selectedCards.length >= 2) {
                    const secondCard = selectedCards[1];
                    const secondItemDiv = document.createElement('div');
                    secondItemDiv.className = 'selected-item-card';
                    secondItemDiv.style.animationDelay = '0.1s';
                    secondItemDiv.innerHTML = `
                        <div class="selected-item-circle">${secondCard.dataset.emoji}</div>
                        <div class="selected-item-title">${secondCard.dataset.title}</div>
                    `;
                    selectedItemsDisplay.appendChild(secondItemDiv);
                }
                
                mainUI.style.display = 'none';
                blurOverlay.classList.add('active');
                confirmationScreen.classList.add('active');
            }
            
            function hideConfirmationScreen() {
                blurOverlay.classList.remove('active');
                confirmationScreen.classList.remove('active');
                
                setTimeout(() => {
                    mainUI.style.display = 'flex';
                }, 300);
            }
            
            redoButton.addEventListener('click', function() {
                haptic.click();

                selectedIcons.forEach(icon => icon.remove());
                selectedIcons.clear();

                selectedCards.forEach(card => card.classList.remove('selected'));
                selectedCards = [];

                centerNumber.classList.remove('visible');
                centerArrow.classList.remove('visible');
                centerText.classList.remove('hidden');
                progressRing.classList.remove('active', 'hidden');
                updateProgressRing(0);

                document.getElementById('backgroundBlur').classList.remove('active');
                document.getElementById('completionBloom').classList.remove('active');
                document.getElementById('bloomPulse').classList.remove('active');
                ['lightPulse1', 'lightPulse2', 'lightPulse3'].forEach(id => document.getElementById(id).classList.remove('active'));

                hideConfirmationScreen();

                const island = document.getElementById('dynamicIsland');
                island.classList.add('re-expand');
                setTimeout(() => {
                    island.classList.remove('re-expand');
                    updateIslandText(1);
                }, 1200);
            });
            
            // "Êõ∏„ÅÑ„Å¶Áî∞‰∏≠„Å´ÊèêÊ°à"„Éú„Çø„É≥ ‚Üí thanks2.html„Å∏ÁßªÂãï
            suggestTextButton.addEventListener('click', function() {
                haptic.click();
                window.location.href = 'thanks2.html';
            });
            
            centerArrow.addEventListener('click', function() {
                if (selectedCards.length === 2) {
                    showConfirmationScreen();
                }
            });

            function handleSelection(card) {
                // "Êõ∏„ÅÑ„Å¶ÊèêÊ°à"„Çí„Çø„ÉÉ„Éó„Åó„ÅüÂ†¥Âêà„ÅØthanks2.html„Å∏ÁßªÂãï
                if (card.dataset.title === "Êõ∏„ÅÑ„Å¶ÊèêÊ°à") {
                    haptic.click();
                    window.location.href = 'thanks2.html';
                    return;
                }

                if (selectedCards.includes(card) || selectedCards.length >= maxSelection) return;
                
                haptic.click();
                selectedCards.push(card);
                card.classList.add('selected', 'animating');
                
                const glassRect = centerGlass.getBoundingClientRect();
                const endX = glassRect.left + glassRect.width / 2;
                const endY = glassRect.top + glassRect.height / 2;
                
                card.style.transition = 'all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                card.style.left = (endX - containerRect.left) + 'px';
                card.style.top = (endY - containerRect.top) + 'px';
                card.style.opacity = '0';
                
                addIconToRing(card);
                
                setTimeout(() => {
                    card.style.left = card.dataset.originalX + 'px';
                    card.style.top = card.dataset.originalY + 'px';
                    card.style.opacity = '1';
                    card.style.transition = '';
                    card.classList.remove('animating');
                }, 600);
            }

            function checkNearCenter(card) {
                const cardRect = card.getBoundingClientRect();
                const glassRect = centerGlass.getBoundingClientRect();
                
                const cardCenterX = cardRect.left + cardRect.width / 2;
                const cardCenterY = cardRect.top + cardRect.height / 2;
                const glassCenterX = glassRect.left + glassRect.width / 2;
                const glassCenterY = glassRect.top + glassRect.height / 2;
                
                const distance = Math.sqrt(
                    Math.pow(cardCenterX - glassCenterX, 2) + 
                    Math.pow(cardCenterY - glassCenterY, 2)
                );
                
                return distance < glassRect.width / 2 + 30;
            }

            let isDragging = false;
            let currentCard = null;
            let startX, startY;
            let dragStartTime = 0;

            document.querySelectorAll('.icon-card').forEach(card => {
                // „Çø„ÉÉ„Éó/„ÇØ„É™„ÉÉ„ÇØ„ÅßÈÅ∏Êäû
                card.addEventListener('click', function(e) {
                    if (this.classList.contains('selected')) return;
                    if (isDragging) return;

                    e.preventDefault();
                    e.stopPropagation();
                    handleSelection(this);
                });

                // „Çø„ÉÉ„ÉÅ„Ç§„Éô„É≥„Éà„Åß„ÇÇÈÅ∏Êäû
                card.addEventListener('touchend', function(e) {
                    if (this.classList.contains('selected')) return;

                    const touchDuration = Date.now() - dragStartTime;
                    const moveDistance = Math.sqrt(
                        Math.pow(e.changedTouches[0].clientX - startX, 2) +
                        Math.pow(e.changedTouches[0].clientY - startY, 2)
                    );

                    if (touchDuration < 200 && moveDistance < 10 && !isDragging) {
                        e.preventDefault();
                        e.stopPropagation();
                        handleSelection(this);
                    }
                }, { passive: false });

                // „Éâ„É©„ÉÉ„Ç∞Ê©üËÉΩ„ÇÇÁ∂≠ÊåÅ
                card.addEventListener('mousedown', startDrag);
                card.addEventListener('touchstart', startDrag, { passive: false });
            });

            function startDrag(e) {
                if (this.classList.contains('selected')) return;

                haptic.click();
                isDragging = false;
                currentCard = this;
                dragStartTime = Date.now();

                const touch = e.type === 'touchstart' ? e.touches[0] : e;
                startX = touch.clientX;
                startY = touch.clientY;

                document.addEventListener('mousemove', drag);
                document.addEventListener('touchmove', drag, { passive: false });
                document.addEventListener('mouseup', endDrag);
                document.addEventListener('touchend', endDrag);
            }

            function drag(e) {
                if (!currentCard) return;
                
                const touch = e.type === 'touchmove' ? e.touches[0] : e;
                const moveX = Math.abs(touch.clientX - startX);
                const moveY = Math.abs(touch.clientY - startY);
                
                if (moveX > 5 || moveY > 5) {
                    isDragging = true;
                    currentCard.classList.add('dragging');
                    
                    const containerRect = container.getBoundingClientRect();
                    const x = touch.clientX - containerRect.left;
                    const y = touch.clientY - containerRect.top;
                    
                    currentCard.style.left = x + 'px';
                    currentCard.style.top = y + 'px';
                    
                    if (checkNearCenter(currentCard)) {
                        currentCard.classList.add('near-center');
                    } else {
                        currentCard.classList.remove('near-center');
                    }
                }
            }

            function endDrag(e) {
                if (currentCard) {
                    currentCard.classList.remove('dragging');
                    
                    if (isDragging && checkNearCenter(currentCard)) {
                        currentCard.classList.remove('near-center');
                        handleSelection(currentCard);
                    } else if (isDragging) {
                        currentCard.style.transition = 'all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)';
                        currentCard.style.left = currentCard.dataset.originalX + 'px';
                        currentCard.style.top = currentCard.dataset.originalY + 'px';
                        setTimeout(() => {
                           currentCard.style.transition = '';
                        }, 300);
                    }
                }
                
                setTimeout(() => {
                    isDragging = false;
                    currentCard = null;
                }, 100);

                document.removeEventListener('mousemove', drag);
                document.removeEventListener('touchmove', drag);
                document.removeEventListener('mouseup', endDrag);
                document.removeEventListener('touchend', endDrag);
            }
        }
    </script>

</body>
</html>
